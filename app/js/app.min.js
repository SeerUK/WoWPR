var ApiClient=function(a,b){var c=function(c,d){var e=b.defer();return a.get("proxy.php?region="+c+"&uri="+d).success(function(a,b,c,d){e.resolve({data:a,status:b,headers:c,config:d})}).error(function(a,b,c,d){e.reject({data:a,status:b,headers:c,config:d})}),e.promise};return{findCharacter:function(a,b,d){return c(a,"/api/wow/character/"+b+"/"+d)},findRealms:function(a){return c(a,"/api/wow/realm/status")}}},ConfigManager=function(a){var b=a.get("wowpr.config")||{};return{get:function(a){return b[a]||!1},set:function(c,d){return b[c]=d,a.set("wowpr.config",b),this}}},StorageEngine=function(a){var b=function(){return"undefined"==typeof Storage?!1:!0};return{get:function(c){return b?JSON.parse(localStorage.getItem(c)):a.get(c)},set:function(c,d){return b?localStorage.setItem(c,JSON.stringify(d)):a.put(c,d),this},unset:function(c){return b?localStorage.removeItem(c):a.remove(c),this}}};angular.module("wowpr",["ngAnimate","ngCookies","ngRoute","wowpr.filters","wowpr.services","wowpr.directives","wowpr.controllers"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/home.html",controller:"HomeCtrl"}),a.when("/character/:realm/:name",{templateUrl:"partials/character.html",controller:"CharacterCtrl"}),a.otherwise({redirectTo:"/"})}]),angular.module("wowpr.controllers",[]).controller("HomeCtrl",["$scope","$q","$http","$location","$templateCache","ApiClient","ConfigManager",function(a,b,c,d,e,f,g){g.get("region")||g.set("region","eu");var h={},i={};i.logo=angular.element(document.getElementById("logo")),i.spinner=angular.element(document.getElementById("spinner")),h.hideSpinner=function(){i.logo.removeClass("hide"),i.spinner.removeClass("active")},h.showSpinner=function(){i.logo.addClass("hide"),i.spinner.addClass("active")},h.regionChange=function(){g.set("region",a.region),h.showSpinner(),f.findRealms(a.region).then(function(b){h.hideSpinner(),a.realms=b.data.realms;var c;a.$watch("formData.name",function(){h.hideSpinner(),clearTimeout(c),c=setTimeout(function(){h.showSpinner(),f.findCharacter(a.region,a.formData.realm,a.formData.name).then(function(b){h.hideSpinner(),b.data.profileMain=b.data.thumbnail.replace("avatar.jpg","profilemain.jpg"),a.character=b.data},function(){h.hideSpinner()})},1500)}),a.doSearch=function(){a.error=null,h.showSpinner(),f.findCharacter(a.region,a.formData.realm,a.formData.name).then(function(b){h.hideSpinner(),a.response=b.data,d.path("/character/"+a.formData.realm+"/"+a.formData.name)},function(b){h.hideSpinner(),a.error=b.data.reason})}})},a.regions=[{name:"Europe",value:"eu"},{name:"United States",value:"us"},{name:"Korea",value:"kr"},{name:"Taiwan",value:"tw"}],a.region=g.get("region"),a.$watch("region",h.regionChange),c.get("partials/character.html",{cache:e})}]).controller("CharacterCtrl",["$scope","$http","$location","$routeParams","$templateCache","ApiClient","ConfigManager",function(a,b,c,d,e,f,g){g.get("region")||c.path("/");var h={},i={};i.logo=angular.element(document.getElementById("logo")),i.spinner=angular.element(document.getElementById("spinner")),h.hideSpinner=function(){i.logo.removeClass("hide"),i.spinner.removeClass("active")},h.showSpinner=function(){i.logo.addClass("hide"),i.spinner.addClass("active")},h.region=g.get("region"),h.showSpinner(),f.findCharacter(h.region,d.realm,d.name).then(function(b){h.hideSpinner(),console.log(b.data),a.character=b.data},function(b){h.hideSpinner(),a.error=b.data.reason}),b.get("partials/home.html",{cache:e})}]),angular.module("wowpr.directives",[]).directive("asideMenuButton",[function(){return{restrict:"A",link:function(a,b,c){var d=angular.element(document.getElementById(c.parent)),e=angular.element(document.getElementsByTagName("body")),f=function(){d.removeClass("active")},g=function(){d.addClass("active")};e.on("click",function(){d.hasClass("active")&&f()}),d.on("click",function(a){a.stopPropagation()}),b.on("click",function(a){a.preventDefault(),a.stopPropagation(),d.hasClass("active")?f():g()})}}}]),angular.module("wowpr.filters",[]).filter("interpolate",["version",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}]),angular.module("wowpr.services",[]).service("Test",[function(){return{test:"test"}}]).service("ApiClient",["$http","$q",ApiClient]).service("ConfigManager",["StorageEngine",ConfigManager]).service("StorageEngine",["$cookieStore",StorageEngine]);